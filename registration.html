---
layout: default
title: Registration
description: Registration form for those who want to join Robotics Club CIT Kokrajhar
---
<script type="module">
    // Initialize Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDnS3zS37uu-oac7-iw0TMFhMAyfywWHYk",
    authDomain: "myiot-a57f5.firebaseapp.com",
    databaseURL: "https://myiot-a57f5-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "myiot-a57f5",
    storageBucket: "myiot-a57f5.appspot.com",
    messagingSenderId: "542244698430",
    appId: "1:542244698430:web:d6bac550b8c0d1722e946f",
    measurementId: "G-GBH4J6ZRC1"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const storage = getStorage(app);

  // Function to load the QR code dynamically
  async function loadQRCode() {
    try {
      const qrImage = document.getElementById('qrImage');
      const storageRef = ref(storage, 'QR/QR.jpeg');
      const qrUrl = await getDownloadURL(storageRef);
      qrImage.src = qrUrl;
    } catch (error) {
      console.error('Error loading QR code:', error);
    }
  }

  // Load QR code when the page is loaded
  document.addEventListener('DOMContentLoaded', function() {
    loadQRCode();
  });

  document.querySelector('form[name="submit-to-google-sheet"]').addEventListener('submit', async function(e) {
    e.preventDefault();

    // Show submitting spinner
    document.getElementById('submittingSpinner').style.display = 'block';

    try {
      const paymentFileInput = document.querySelector('input[name="paymentScreenshot"]');
      const photoFileInput = document.querySelector('input[name="passportPhoto"]');
      const paymentFile = paymentFileInput.files[0];
      const photoFile = photoFileInput.files[0];
      let paymentFileURL = '';
      let photoFileURL = '';

      if (paymentFile) {
        const paymentStorageRef = ref(storage, `Payments/${paymentFile.name}`);
        await uploadBytes(paymentStorageRef, paymentFile);
        paymentFileURL = await getDownloadURL(paymentStorageRef);
      }

      if (photoFile) {
        const photoStorageRef = ref(storage, `Photos/${photoFile.name}`);
        await uploadBytes(photoStorageRef, photoFile);
        photoFileURL = await getDownloadURL(photoStorageRef);
      }

      const currentDate = new Date().toISOString();

      await setDoc(doc(db, 'Registrations', e.target.fullname.value), {
        fullname: e.target.fullname.value,
        email: e.target.email.value,
        phone: e.target.phone.value,
        module: e.target.module.value,
        year: e.target.year.value,
        branch: e.target.branch.value,
        experience: e.target.experience.value,
        paymentFileURL: paymentFileURL,
        photoFileURL: photoFileURL,
        date: currentDate
      });

      // Hide submitting spinner
      document.getElementById('submittingSpinner').style.display = 'none';

      // Show success modal
      document.getElementById('modal').classList.add('is-active');
      e.target.reset();
    } catch (error) {
      console.error("Error uploading file or writing document: ", error);
      // Hide submitting spinner
      document.getElementById('submittingSpinner').style.display = 'none';
      // Handle error (e.g., show error message)
    }
  });

  function closeModal() {
    document.getElementById('modal').classList.remove('is-active');
  }

  // Update the file input label with the selected file name
  document.querySelectorAll('.file-input').forEach(input => {
    input.addEventListener('change', function() {
      const fileName = this.files[0].name;
      this.closest('.file').querySelector('.file-name').textContent = fileName;
    });
  });

</script>
<div class="modal" id="modal">
  <div class="modal-background" onclick="closeModal()"></div>
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title"></p>
      <button class="delete" aria-label="close" onclick="closeModal()"></button>
    </header>
    <section class="modal-card-body">
      <h1 class="is-size-5">Registration complete</h1>
      <p class="has-text-danger has-text-weight-semibold">
        A warm welcome to you to join us!
      </p>
      <br />
      <p>
        We hope you’ll make the best use of your skills and knowledge and make
        sure something great is achieved!
      </p>
    </section>
    <footer class="modal-card-foot">
      <a class="button is-success" href="{{ site.baseurl }}/">Home</a>
      <button class="button" onclick="closeModal()">Close</button>
    </footer>
  </div>
</div>

<div class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-two-thirds-tablet is-half-desktop">
        <h1 class="title">Robotics Club registration form</h1>
        <h3 class="subtitle">
          Fill the form below to register yourself as a member
        </h3>

        <span class="">A membership fee of </span>
        <span class="icon is-small"><i class="fa fa-rupee-sign"></i></span>
        <span class="has-text-weight-semibold">200</span>
        <span class="">need to be paid offline or in google form integrated QR </span>

        <hr />

        <p class="is-size-7 has-text-weight-semibold">
          Special perks for members :
        </p>
        <ol class="is-size-7">
          <li>Members can issue various components from the club inventory to make
            their own projects</li>
          <li>Members can collaborate with other members of the club & get funds
            from the institution for large projects</li>
          <li>Members can attend seminars and workshops held in the club to learn about
            robotics</li>
          <li>Members can participate in various robotics competitions on behalf of
            robotics club</li>
        </ol>


        <hr />

        <form name="submit-to-google-sheet">
          <div class="field">
            <label class="label">Name</label>
            <div class="control">
              <input name="fullname" required autocomplete="name" class="input" type="text"
                placeholder="Your full name" />
            </div>
          </div>

          <div class="field">
            <label class="label">college mail</label>
            <div class="control has-icons-left">
              <input name="email" required autocomplete="email" class="input" type="email"
                placeholder="Valid email address" />
              <span class="icon is-small is-left">
                <i class="fas fa-envelope"></i>
              </span>
            </div>
          </div>

          <div class="field is-expanded">
            <label class="label">Phone</label>
            <div class="field has-addons">
              <p class="control">
                <a class="button is-static">
                  +91
                </a>
              </p>
              <p class="control is-expanded">
                <input name="phone" required autocomplete="tel-national" class="input" type="tel"
                  placeholder="Your phone number" />
              </p>
            </div>
          </div>

          <div class="field">
            <label class="label">Module</label>
            <div class="control">
              <label class="radio">
                <input type="radio" required name="module" value="degree" />
                Degree
              </label>
              <label class="radio">
                <input type="radio" required name="module" value="diploma" />
                Diploma
              </label>
            </div>
          </div>

          <div class="field">
            <label class="label">Year</label>
            <div class="control">
              <div class="select">
                <select name="year" required>
                  <option value="1st">1st</option>
                  <option value="2nd">2nd</option>
                  <option value="3rd">3rd</option>
                  <option value="4th">4th</option>
                </select>
              </div>
            </div>
          </div>

          <div class="field">
            <label class="label">Branch</label>
            <div class="control">
              <div class="select">
                <select name="branch" required>
                  <option value="cse">CSE (Degree)</option>
                  <option value="ece">ECE (Degree)</option>
                  <option value="ie">IE (Degree)</option>
                  <option value="it">IT (Degree)</option>
                  <option value="fet">FET (Degree)</option>
                  <option value="ce">CE (Degree)</option>
                  <option value="mcd">MCD (Degree)</option>

                  <option value="co">CO (Diploma)</option>
                  <option value="et">ET (Diploma)</option>
                  <option value="ci">CI (Diploma)</option>
                  <option value="ct">CT (Diploma)</option>
                  <option value="fpt">FPT (Diploma)</option>
                  <option value="amt">AMT (Diploma)</option>
                </select>
              </div>
            </div>
          </div>

          <div class="field">
            <label class="label">Any previous experiences on robotics</label>
            <div class="control">
              <input name="experience" class="input" type="text" placeholder="Previous experiences if any" />
            </div>
         
          <!-- QR Code Display -->
          <div class="field">
            <label class="label">QR Code for Payment</label>
            <div class="control">
              <img id="qrImage" src="" alt="QR Code" style="max-width: 20%;" />
            </div>
          </div>

          <!-- File upload field -->
          <div class="field">
            <label class="label">Upload the payment screenshot</label>
            <div class="file has-name">
              <label class="file-label">
                <input class="file-input" type="file" name="paymentScreenshot" required>
                <span class="file-cta">
                  <span class="file-icon">
                    <i class="fas fa-upload"></i>
                  </span>
                  <span class="file-label">
                    Choose a file…
                  </span>
                </span>
                <span class="file-name">
                  No file uploaded
                </span>
              </label>
            </div>
          </div>        
          <!-- File upload field for passport photo -->
          <div class="field">
            <label class="label">Upload your recent Passport sized photo</label>
            <div class="file has-name">
              <label class="file-label">
                <input class="file-input" type="file" name="passportPhoto" required>
                <span class="file-cta">
                  <span class="file-icon">
                    <i class="fas fa-upload"></i>
                  </span>
                  <span class="file-label">
                    Choose an image…
                  </span>
                </span>
                <span class="file-name">
                  No file uploaded
                </span>
              </label>
            </div>
          </div>          
          <br />
          <div id="submittingSpinner" class="has-text-centered" style="display: none;">
            <p>Submitting Your Response</p>
            <progress class="progress is-small is-primary" max="50">Submitting...</progress>
          </div>
        <br />
          <div class="field is-grouped">
            <div class="control">
              <button type="submit" class="button is-link" id="submitButton">
                Submit
              </button>
            </div>
            <div class="control">
              <button type="reset" class="button">Cancel</button>
            </div>
          </div>
        </form>
        <br>
        <br>
      </div>
    </div>
  </div>
</div>

<style>
    .section {
      margin-top: 20px;
    }
  </style>
</head>
<body>
